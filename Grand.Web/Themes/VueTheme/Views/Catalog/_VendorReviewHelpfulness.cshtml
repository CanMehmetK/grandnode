@model VendorReviewHelpfulnessModel
<div class="vendor-review-helpfulness d-inline-flex justify-content-end align-items-center">
    <span class="question">@T("Reviews.Helpfulness.WasHelpful?")</span>
    <span class="vote-options btn-group">
        <span id="vote-yes-@(Model.VendorReviewId)" class="btn btn-sm btn-outline vote"><b-icon variant="success" icon="hand-thumbs-up"></b-icon></span>
        <span id="vote-no-@(Model.VendorReviewId)" class="btn btn-sm btn-outline vote"><b-icon variant="danger" icon="hand-thumbs-down"></b-icon></span>
    </span>
    <span class="vote-stats">
        (<span id="helpfulness-vote-yes-@(Model.VendorReviewId)">@(Model.HelpfulYesTotal)</span>/<span id="helpfulness-vote-no-@(Model.VendorReviewId)">@(Model.HelpfulNoTotal)</span>)
    </span>
    <span id="helpfulness-vote-result-@(Model.VendorReviewId)" class="result alert alert-info mx-1 mb-0" style="display:none;"></span>

    <script asp-location="Footer">
            document.getElementById('vote-yes-@(Model.VendorReviewId)').addEventListener("click",function(e){
                setProductReviewHelpfulness@(Model.VendorReviewId)('true');
            });
            document.getElementById('vote-no-@(Model.VendorReviewId)').addEventListener("click",function(e){
                setProductReviewHelpfulness@(Model.VendorReviewId)('false');
            });

         function setProductReviewHelpfulness@(Model.VendorReviewId)(wasHelpful) {
                axios({
                    url: '@(Url.RouteUrl("SetVendorReviewHelpfulness"))',
                    method: 'post',
                    params: { "vendorReviewId": '@(Model.VendorReviewId)', "vendorId": '@(Model.VendorReviewId)' ,"washelpful": wasHelpful }
                })
                .then(function (response) {
                    document.getElementById("helpfulness-vote-yes-@(Model.VendorReviewId)").innerHTML = response.data.TotalYes
                    document.getElementById("helpfulness-vote-no-@(Model.VendorReviewId)").innerHTML = response.data.TotalNo;
                    document.getElementById("helpfulness-vote-result-@(Model.VendorReviewId)").innerHTML = response.data.Result;
                    document.getElementById('helpfulness-vote-result-@(Model.VendorReviewId)').style.display = "block";
                    setTimeout(function () { document.getElementById('helpfulness-vote-result-@(Model.VendorReviewId)').style.display = "none"; }, 1000);
                }).catch(function (error) {
                    alert(error);
                })
        }
    </script>
</div>