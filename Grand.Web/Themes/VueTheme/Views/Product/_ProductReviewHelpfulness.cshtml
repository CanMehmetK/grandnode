@model ProductReviewHelpfulnessModel
<div class="product-review-helpfulness d-inline-flex justify-content-end align-items-center flex-wrap">
    <span class="question">@T("Reviews.Helpfulness.WasHelpful?")</span>
    <span class="vote-options btn-group">
        <span id="vote-yes-@(Model.ProductReviewId)" class="btn btn-sm btn-outline vote"><b-icon variant="success" icon="hand-thumbs-up"></b-icon></span>
        <span id="vote-no-@(Model.ProductReviewId)" class="btn btn-sm btn-outline vote"><b-icon variant="danger" icon="hand-thumbs-down"></b-icon></span>
    </span>
    <span class="vote-stats">
        (<span id="helpfulness-vote-yes-@(Model.ProductReviewId)">@(Model.HelpfulYesTotal)</span>/<span id="helpfulness-vote-no-@(Model.ProductReviewId)">@(Model.HelpfulNoTotal)</span>)
    </span>
    <span id="helpfulness-vote-result-@(Model.ProductReviewId)" class="result alert alert-info mx-1 mb-0" style="display:none;"></span>
    <script asp-location="Footer">
     
            document.getElementById('vote-yes-@(Model.ProductReviewId)').addEventListener("click",function(e){
                setProductReviewHelpfulness@(Model.ProductReviewId)('true');
            });
            document.getElementById('vote-no-@(Model.ProductReviewId)').addEventListener("click",function(e){
                setProductReviewHelpfulness@(Model.ProductReviewId)('false');
            });
        

        function setProductReviewHelpfulness@(Model.ProductReviewId)(wasHelpful) {
                axios({
                    url: '@(Url.RouteUrl("SetProductReviewHelpfulness"))',
                    method: 'post',
                    params: { "productReviewId": '@(Model.ProductReviewId)', "productId": '@(Model.ProductId)' ,"washelpful": wasHelpful }
                })
                .then(function (response) {
                    document.getElementById("helpfulness-vote-yes-@(Model.ProductReviewId)").innerHTML = response.data.TotalYes
                    document.getElementById("helpfulness-vote-no-@(Model.ProductReviewId)").innerHTML = response.data.TotalNo;
                    document.getElementById("helpfulness-vote-result-@(Model.ProductReviewId)").innerHTML = response.data.Result;
                    document.getElementById('helpfulness-vote-result-@(Model.ProductReviewId)').style.display = "block";
                    setTimeout(function () { document.getElementById('helpfulness-vote-result-@(Model.ProductReviewId)').style.display = "none"; }, 1000);
                }).catch(function (error) {
                    alert(error);
                })
        }
    </script>
</div>
